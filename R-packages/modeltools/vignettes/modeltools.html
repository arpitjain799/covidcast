<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Getting started with modeltools</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>
<script src="data:application/javascript;base64,JChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXsKICAgIGlmICh0eXBlb2YgJCgnW2RhdGEtdG9nZ2xlPSJ0b29sdGlwIl0nKS50b29sdGlwID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgJCgnW2RhdGEtdG9nZ2xlPSJ0b29sdGlwIl0nKS50b29sdGlwKCk7CiAgICB9CiAgICBpZiAoJCgnW2RhdGEtdG9nZ2xlPSJwb3BvdmVyIl0nKS5wb3BvdmVyID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgJCgnW2RhdGEtdG9nZ2xlPSJwb3BvdmVyIl0nKS5wb3BvdmVyKCk7CiAgICB9Cn0pOwo="></script>
<link href="data:text/css,%0A%2Elightable%2Dminimal%20%7B%0Aborder%2Dcollapse%3A%20separate%3B%0Aborder%2Dspacing%3A%2016px%201px%3B%0Awidth%3A%20100%25%3B%0Amargin%2Dbottom%3A%2010px%3B%0A%7D%0A%2Elightable%2Dminimal%20td%20%7B%0Amargin%2Dleft%3A%205px%3B%0Amargin%2Dright%3A%205px%3B%0A%7D%0A%2Elightable%2Dminimal%20th%20%7B%0Amargin%2Dleft%3A%205px%3B%0Amargin%2Dright%3A%205px%3B%0A%7D%0A%2Elightable%2Dminimal%20thead%20tr%3Alast%2Dchild%20th%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%2300000050%3B%0Aempty%2Dcells%3A%20hide%3B%0A%7D%0A%2Elightable%2Dminimal%20tbody%20tr%3Afirst%2Dchild%20td%20%7B%0Apadding%2Dtop%3A%200%2E5em%3B%0A%7D%0A%2Elightable%2Dminimal%2Elightable%2Dhover%20tbody%20tr%3Ahover%20%7B%0Abackground%2Dcolor%3A%20%23f5f5f5%3B%0A%7D%0A%2Elightable%2Dminimal%2Elightable%2Dstriped%20tbody%20tr%3Anth%2Dchild%28even%29%20%7B%0Abackground%2Dcolor%3A%20%23f5f5f5%3B%0A%7D%0A%2Elightable%2Dclassic%20%7B%0Aborder%2Dtop%3A%200%2E16em%20solid%20%23111111%3B%0Aborder%2Dbottom%3A%200%2E16em%20solid%20%23111111%3B%0Awidth%3A%20100%25%3B%0Amargin%2Dbottom%3A%2010px%3B%0Amargin%3A%2010px%205px%3B%0A%7D%0A%2Elightable%2Dclassic%20tfoot%20tr%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A%2Elightable%2Dclassic%20tfoot%20tr%3Afirst%2Dchild%20td%20%7B%0Aborder%2Dtop%3A%200%2E14em%20solid%20%23111111%3B%0A%7D%0A%2Elightable%2Dclassic%20caption%20%7B%0Acolor%3A%20%23222222%3B%0A%7D%0A%2Elightable%2Dclassic%20td%20%7B%0Apadding%2Dleft%3A%205px%3B%0Apadding%2Dright%3A%205px%3B%0Acolor%3A%20%23222222%3B%0A%7D%0A%2Elightable%2Dclassic%20th%20%7B%0Apadding%2Dleft%3A%205px%3B%0Apadding%2Dright%3A%205px%3B%0Afont%2Dweight%3A%20normal%3B%0Acolor%3A%20%23222222%3B%0A%7D%0A%2Elightable%2Dclassic%20thead%20tr%3Alast%2Dchild%20th%20%7B%0Aborder%2Dbottom%3A%200%2E10em%20solid%20%23111111%3B%0A%7D%0A%2Elightable%2Dclassic%2Elightable%2Dhover%20tbody%20tr%3Ahover%20%7B%0Abackground%2Dcolor%3A%20%23F9EEC1%3B%0A%7D%0A%2Elightable%2Dclassic%2Elightable%2Dstriped%20tbody%20tr%3Anth%2Dchild%28even%29%20%7B%0Abackground%2Dcolor%3A%20%23f5f5f5%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20%7B%0Aborder%2Dtop%3A%203px%20double%20%23111111%3B%0Aborder%2Dbottom%3A%203px%20double%20%23111111%3B%0Awidth%3A%20100%25%3B%0Amargin%2Dbottom%3A%2010px%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20tfoot%20tr%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20tfoot%20tr%3Afirst%2Dchild%20td%20%7B%0Aborder%2Dtop%3A%203px%20double%20%23111111%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20caption%20%7B%0Acolor%3A%20%23222222%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20td%20%7B%0Apadding%2Dleft%3A%205px%3B%0Apadding%2Dright%3A%205px%3B%0Acolor%3A%20%23222222%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20th%20%7B%0Apadding%2Dleft%3A%205px%3B%0Apadding%2Dright%3A%205px%3B%0Afont%2Dweight%3A%20normal%3B%0Acolor%3A%20%23222222%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20tbody%20tr%3Alast%2Dchild%20td%20%7B%0Aborder%2Dbottom%3A%203px%20double%20%23111111%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%20thead%20tr%3Alast%2Dchild%20th%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23111111%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%2Elightable%2Dhover%20tbody%20tr%3Ahover%20%7B%0Abackground%2Dcolor%3A%20%23F9EEC1%3B%0A%7D%0A%2Elightable%2Dclassic%2D2%2Elightable%2Dstriped%20tbody%20tr%3Anth%2Dchild%28even%29%20%7B%0Abackground%2Dcolor%3A%20%23f5f5f5%3B%0A%7D%0A%2Elightable%2Dmaterial%20%7B%0Amin%2Dwidth%3A%20100%25%3B%0Awhite%2Dspace%3A%20nowrap%3B%0Atable%2Dlayout%3A%20fixed%3B%0Afont%2Dfamily%3A%20Roboto%2C%20sans%2Dserif%3B%0Aborder%3A%201px%20solid%20%23EEE%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0Amargin%2Dbottom%3A%2010px%3B%0A%7D%0A%2Elightable%2Dmaterial%20tfoot%20tr%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A%2Elightable%2Dmaterial%20tfoot%20tr%3Afirst%2Dchild%20td%20%7B%0Aborder%2Dtop%3A%201px%20solid%20%23EEE%3B%0A%7D%0A%2Elightable%2Dmaterial%20th%20%7B%0Aheight%3A%2056px%3B%0Apadding%2Dleft%3A%2016px%3B%0Apadding%2Dright%3A%2016px%3B%0A%7D%0A%2Elightable%2Dmaterial%20td%20%7B%0Aheight%3A%2052px%3B%0Apadding%2Dleft%3A%2016px%3B%0Apadding%2Dright%3A%2016px%3B%0Aborder%2Dtop%3A%201px%20solid%20%23eeeeee%3B%0A%7D%0A%2Elightable%2Dmaterial%2Elightable%2Dhover%20tbody%20tr%3Ahover%20%7B%0Abackground%2Dcolor%3A%20%23f5f5f5%3B%0A%7D%0A%2Elightable%2Dmaterial%2Elightable%2Dstriped%20tbody%20tr%3Anth%2Dchild%28even%29%20%7B%0Abackground%2Dcolor%3A%20%23f5f5f5%3B%0A%7D%0A%2Elightable%2Dmaterial%2Elightable%2Dstriped%20tbody%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A%2Elightable%2Dmaterial%2Elightable%2Dstriped%20thead%20tr%3Alast%2Dchild%20th%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ddd%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%20%7B%0Amin%2Dwidth%3A%20100%25%3B%0Awhite%2Dspace%3A%20nowrap%3B%0Atable%2Dlayout%3A%20fixed%3B%0Afont%2Dfamily%3A%20Roboto%2C%20sans%2Dserif%3B%0Aborder%3A%201px%20solid%20%23FFFFFF12%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0Amargin%2Dbottom%3A%2010px%3B%0Abackground%2Dcolor%3A%20%23363640%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%20tfoot%20tr%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%20tfoot%20tr%3Afirst%2Dchild%20td%20%7B%0Aborder%2Dtop%3A%201px%20solid%20%23FFFFFF12%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%20th%20%7B%0Aheight%3A%2056px%3B%0Apadding%2Dleft%3A%2016px%3B%0Apadding%2Dright%3A%2016px%3B%0Acolor%3A%20%23FFFFFF60%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%20td%20%7B%0Aheight%3A%2052px%3B%0Apadding%2Dleft%3A%2016px%3B%0Apadding%2Dright%3A%2016px%3B%0Acolor%3A%20%23FFFFFF%3B%0Aborder%2Dtop%3A%201px%20solid%20%23FFFFFF12%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%2Elightable%2Dhover%20tbody%20tr%3Ahover%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF12%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%2Elightable%2Dstriped%20tbody%20tr%3Anth%2Dchild%28even%29%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF12%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%2Elightable%2Dstriped%20tbody%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A%2Elightable%2Dmaterial%2Ddark%2Elightable%2Dstriped%20thead%20tr%3Alast%2Dchild%20th%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23FFFFFF12%3B%0A%7D%0A%2Elightable%2Dpaper%20%7B%0Awidth%3A%20100%25%3B%0Amargin%2Dbottom%3A%2010px%3B%0Acolor%3A%20%23444%3B%0A%7D%0A%2Elightable%2Dpaper%20tfoot%20tr%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A%2Elightable%2Dpaper%20tfoot%20tr%3Afirst%2Dchild%20td%20%7B%0Aborder%2Dtop%3A%201px%20solid%20%2300000020%3B%0A%7D%0A%2Elightable%2Dpaper%20thead%20tr%3Alast%2Dchild%20th%20%7B%0Acolor%3A%20%23666%3B%0Avertical%2Dalign%3A%20bottom%3B%0Aborder%2Dbottom%3A%201px%20solid%20%2300000020%3B%0Aline%2Dheight%3A%201%2E15em%3B%0Apadding%3A%2010px%205px%3B%0A%7D%0A%2Elightable%2Dpaper%20td%20%7B%0Avertical%2Dalign%3A%20middle%3B%0Aborder%2Dbottom%3A%201px%20solid%20%2300000010%3B%0Aline%2Dheight%3A%201%2E15em%3B%0Apadding%3A%207px%205px%3B%0A%7D%0A%2Elightable%2Dpaper%2Elightable%2Dhover%20tbody%20tr%3Ahover%20%7B%0Abackground%2Dcolor%3A%20%23F9EEC1%3B%0A%7D%0A%2Elightable%2Dpaper%2Elightable%2Dstriped%20tbody%20tr%3Anth%2Dchild%28even%29%20%7B%0Abackground%2Dcolor%3A%20%2300000008%3B%0A%7D%0A%2Elightable%2Dpaper%2Elightable%2Dstriped%20tbody%20td%20%7B%0Aborder%3A%200%3B%0A%7D%0A" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">Getting started with modeltools</h1>



<div id="installing" class="section level2">
<h2>Installing</h2>
<p><font size="3"><strong><em>Warning</em>: This package is not on CRAN!</strong></font><br /><br /> An <tt>R</tt> package named “<code>modeltools</code>” does exist on CRAN, but it is entirely unrelated to this one. Delphi’s <code>modeltools</code> package can be installed from the Delphi research group <a href="https://github.com/cmu-delphi/"><strong>GitHub page</strong></a> using the <a href="https://cran.r-project.org/package=devtools"><code>devtools</code></a> package, as shown below. The package’s source code can be found <a href="https://github.com/cmu-delphi/covidcast/tree/main/R-packages/modeltools"><strong>here</strong></a>.</p>
<div id="installing-with-vignettes" class="section level3">
<h3>Installing with vignettes</h3>
<p>If you would like to install the <code>modeltools</code> package with tutorial vignettes included (recommended), then use the following command:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="at">repo =</span> <span class="st">&quot;cmu-delphi/covidcast&quot;</span>, <span class="at">ref =</span> <span class="st">&quot;collin-develop&quot;</span>,</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>                         <span class="at">subdir =</span> <span class="st">&quot;R-packages/modeltools&quot;</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>                         <span class="at">build_vignettes =</span> <span class="cn">TRUE</span>, <span class="at">dependencies =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
<div id="installing-without-vignettes" class="section level3">
<h3>Installing without vignettes</h3>
<p>Building the vignettes for Delphi’s <a href="https://cmu-delphi.github.io/covidcast/covidcastR/"><code>covidcast</code></a> package (a <code>modeltools</code> dependency) causes the above installation to take a couple minutes. If you prefer a quick installation, you can install <code>modeltools</code> without vignettes (the default setting):</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="at">repo =</span> <span class="st">&quot;cmu-delphi/covidcast&quot;</span>, <span class="at">ref =</span> <span class="st">&quot;collin-develop&quot;</span>,</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>                         <span class="at">subdir =</span> <span class="st">&quot;R-packages/modeltools&quot;</span>)</span></code></pre></div>
<p><br /></p>
</div>
</div>
<div id="downloading-data-from-delphis-covidcast-epidata-api" class="section level2">
<h2>Downloading data from Delphi’s COVIDcast Epidata API</h2>
<p>In this <strong>Getting started</strong> vignette, we’ll fetch daily COVID-19 case rate reporting data (i.e. the number of new COVID-19 cases reported per day, per 100,000 population) from Delphi’s <a href="https://cmu-delphi.github.io/delphi-epidata/api/covidcast_signals.html"><strong>COVIDcast Epidata API</strong></a>. The cases rates we’ll examine here are reported by <a href="https://usafacts.org/"><strong>USAFacts</strong></a> and cloned into Delphi’s API every day. As with many other signals, the API also stores a smoothed version of the signal — a 7-day trailing average of the (raw) daily case rates reported by USAFacts. Here, we’ll look at both the raw and smoothed USAFacts case rates from June 1, 2020 through November 15, 2020 for four U.S. states — CA, FL, NY, and TX.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(covidcast)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>start_day <span class="ot">&lt;-</span> <span class="st">&quot;2020-06-01&quot;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>end_day <span class="ot">&lt;-</span> <span class="st">&quot;2020-11-15&quot;</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>geo_values <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;ca&quot;</span>, <span class="st">&quot;fl&quot;</span>, <span class="st">&quot;ny&quot;</span>, <span class="st">&quot;tx&quot;</span>)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>signals <span class="ot">&lt;-</span> <span class="fu">covidcast_signals</span>(<span class="at">data_source =</span> <span class="st">&quot;usa-facts&quot;</span>,</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>                             <span class="at">signal =</span> <span class="fu">c</span>(<span class="st">&quot;confirmed_incidence_prop&quot;</span>,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">&quot;confirmed_7dav_incidence_prop&quot;</span>),</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>                             <span class="at">start_day =</span> start_day,</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>                             <span class="at">end_day =</span> end_day,</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>                             <span class="at">geo_type =</span> <span class="st">&quot;state&quot;</span>, </span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>                             <span class="at">geo_values =</span> geo_values)</span></code></pre></div>
<p><br /></p>
<p>By default, the <a href="https://cmu-delphi.github.io/covidcast/covidcastR/reference/covidcast_signals.html"><code>covidcast_signals()</code></a> function returns the requested signals as a list of <a href="https://cmu-delphi.github.io/covidcast/covidcastR/reference/covidcast_signal.html"><code>covidcast_signal</code></a> data frames, with one data frame for each signal. The <a href="https://cmu-delphi.github.io/covidcast/covidcastR/reference/summary.covidcast_signal.html"><code>summary()</code></a> function can be called on each of these <a href="https://cmu-delphi.github.io/covidcast/covidcastR/reference/covidcast_signal.html"><code>covidcast_signal</code></a> data frames, as below.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(signals[[<span class="dv">1</span>]])</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="do">## A `covidcast_signal` dataframe with 672 rows and 12 columns.</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="do">## data_source : usa-facts</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="do">## signal      : confirmed_incidence_prop</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="do">## geo_type    : state</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="do">## first date                          : 2020-06-01</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="do">## last date                           : 2020-11-15</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="do">## median number of geo_values per day : 4</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(signals[[<span class="dv">2</span>]])</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="do">## A `covidcast_signal` dataframe with 672 rows and 12 columns.</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="do">## data_source : usa-facts</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="do">## signal      : confirmed_7dav_incidence_prop</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="do">## geo_type    : state</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="do">## </span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="do">## first date                          : 2020-06-01</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="do">## last date                           : 2020-11-15</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="do">## median number of geo_values per day : 4</span></span></code></pre></div>
<p><br /></p>
<p>As shown in the summary output above, each of the fetched <a href="https://cmu-delphi.github.io/covidcast/covidcastR/reference/covidcast_signal.html"><code>covidcast_signal</code></a> data frames in the list has 12 columns. Here, we’ll only need the 5 columns selected below. A full description of the USAFacts reporting data stored in Delphi’s API can be found <a href="https://cmu-delphi.github.io/delphi-epidata/api/covidcast-signals/usa-facts.html">here</a>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>signals[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> signals[[<span class="dv">1</span>]] <span class="sc">%&gt;%</span> <span class="fu">select</span>(data_source, signal, geo_value, time_value, value)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>signals[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> signals[[<span class="dv">2</span>]] <span class="sc">%&gt;%</span> <span class="fu">select</span>(data_source, signal, geo_value, time_value, value)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>signals[[<span class="dv">1</span>]] <span class="sc">%&gt;%</span> <span class="fu">table_head</span>(<span class="at">title =</span> <span class="st">&quot;Daily COVID-19 cases per 100,000 pop. (reported values)&quot;</span>)</span></code></pre></div>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; font-size: 15px;" colspan="5">
<div style>
Daily COVID-19 cases per 100,000 pop. (reported values)
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
data_source
</th>
<th style="text-align:left;">
signal
</th>
<th style="text-align:left;">
geo_value
</th>
<th style="text-align:left;">
time_value
</th>
<th style="text-align:right;">
value
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
ca
</td>
<td style="text-align:left;">
2020-06-01
</td>
<td style="text-align:right;">
6.337
</td>
</tr>
<tr>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
fl
</td>
<td style="text-align:left;">
2020-06-01
</td>
<td style="text-align:right;">
3.106
</td>
</tr>
<tr>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
ny
</td>
<td style="text-align:left;">
2020-06-01
</td>
<td style="text-align:right;">
4.837
</td>
</tr>
<tr>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
tx
</td>
<td style="text-align:left;">
2020-06-01
</td>
<td style="text-align:right;">
2.042
</td>
</tr>
<tr>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
ca
</td>
<td style="text-align:left;">
2020-06-02
</td>
<td style="text-align:right;">
5.856
</td>
</tr>
<tr>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
fl
</td>
<td style="text-align:left;">
2020-06-02
</td>
<td style="text-align:right;">
2.882
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>signals[[<span class="dv">2</span>]] <span class="sc">%&gt;%</span> <span class="fu">table_head</span>(<span class="at">title =</span> <span class="st">&quot;Daily COVID-19 cases per 100,000 pop. (7-day trailing average)&quot;</span>)</span></code></pre></div>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; font-size: 15px;" colspan="5">
<div style>
Daily COVID-19 cases per 100,000 pop. (7-day trailing average)
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
data_source
</th>
<th style="text-align:left;">
signal
</th>
<th style="text-align:left;">
geo_value
</th>
<th style="text-align:left;">
time_value
</th>
<th style="text-align:right;">
value
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_7dav_incidence_prop
</td>
<td style="text-align:left;">
ca
</td>
<td style="text-align:left;">
2020-06-01
</td>
<td style="text-align:right;">
6.701
</td>
</tr>
<tr>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_7dav_incidence_prop
</td>
<td style="text-align:left;">
fl
</td>
<td style="text-align:left;">
2020-06-01
</td>
<td style="text-align:right;">
3.381
</td>
</tr>
<tr>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_7dav_incidence_prop
</td>
<td style="text-align:left;">
ny
</td>
<td style="text-align:left;">
2020-06-01
</td>
<td style="text-align:right;">
6.570
</td>
</tr>
<tr>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_7dav_incidence_prop
</td>
<td style="text-align:left;">
tx
</td>
<td style="text-align:left;">
2020-06-01
</td>
<td style="text-align:right;">
4.406
</td>
</tr>
<tr>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_7dav_incidence_prop
</td>
<td style="text-align:left;">
ca
</td>
<td style="text-align:left;">
2020-06-02
</td>
<td style="text-align:right;">
6.389
</td>
</tr>
<tr>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_7dav_incidence_prop
</td>
<td style="text-align:left;">
fl
</td>
<td style="text-align:left;">
2020-06-02
</td>
<td style="text-align:right;">
3.454
</td>
</tr>
</tbody>
</table>
<p>The <code>table_head</code> function used above is an internal function that we use in these tutorial vignettes to display table heads. The source code can be found in the <a href="modeltools.Rmd"><code>vignettes/modeltools.Rmd</code></a> file used to build this page.</p>
</div>
<div id="sliding" class="section level2">
<h2>Sliding</h2>
<p>One of the most basic tools in the <code>modeltools</code> package is the <code>slide_by_geo()</code> function, which is based on the family of functions provided by the <a href="https://cran.r-project.org/web/packages/slider/vignettes/slider.html"><code>slider</code></a> package.</p>
<blockquote>
<p><strong>Definition:</strong> In <code>modeltools</code>, to <em>slide</em> means that, for each <code>geo_value</code> in a <a href="https://cmu-delphi.github.io/covidcast/covidcastR/reference/covidcast_signal.html"><code>covidcast_signal</code></a> data frame, we apply a user-specified function or formula over a trailing window of <code>n</code> days of data.</p>
</blockquote>
<p>Many other functions in this package, such as <a href="../../../docs/modeltoolsR/reference/pct_change.html"><code>pct_change()</code></a> and <a href="../../../docs/modeltoolsR/reference/estimate_deriv.html"><code>estimate_deriv()</code></a>, use <a href="../../../docs/modeltoolsR/reference/slide_by_geo.html"><code>slide_by_geo()</code></a> as their workhorse. Below we provide some examples of performing sliding operations on <code>covidcast</code> signals with <a href="../../../docs/modeltoolsR/reference/slide_by_geo.html"><code>slide_by_geo()</code></a>, utilizing both the function and formula options. <br /></p>
<div id="sliding-with-a-formula" class="section level3">
<h3>Sliding with a formula</h3>
<div id="example-1-computing-a-7-day-trailing-average-by-sliding-a-formula" class="section level4">
<h4>Example 1: Computing a 7-day trailing average by sliding a formula</h4>
<p>In this example we reproduce the calculation of the smoothed daily case rates that is performed by the Delphi API. This can be done by passing the <a href="https://cmu-delphi.github.io/covidcast/covidcastR/reference/covidcast_signal.html"><code>covidcast_signal</code></a> data frame of raw daily case rates (<code>signals[[1]]</code>) to <a href="../../../docs/modeltoolsR/reference/slide_by_geo.html"><code>slide_by_geo()</code></a> and then passing a 7-day trailing average formula to the <code>slide_fun</code> argument, as follows:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modeltools)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">slide_by_geo</span>(signals[[<span class="dv">1</span>]], <span class="at">slide_fun =</span> <span class="sc">~</span> <span class="fu">Mean</span>(.x<span class="sc">$</span>value), <span class="at">n =</span> <span class="dv">7</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">table_head</span>(<span class="at">title =</span> <span class="st">&quot;Daily COVID-19 cases per 100,000 pop. (7-day trailing average)&quot;</span>)</span></code></pre></div>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; font-size: 15px;" colspan="6">
<div style>
Daily COVID-19 cases per 100,000 pop. (7-day trailing average)
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
geo_value
</th>
<th style="text-align:left;">
data_source
</th>
<th style="text-align:left;">
signal
</th>
<th style="text-align:left;">
time_value
</th>
<th style="text-align:right;">
value
</th>
<th style="text-align:right;">
slide_value
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
ca
</td>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
2020-06-01
</td>
<td style="text-align:right;">
6.337
</td>
<td style="text-align:right;">
6.337
</td>
</tr>
<tr>
<td style="text-align:left;">
ca
</td>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
2020-06-02
</td>
<td style="text-align:right;">
5.856
</td>
<td style="text-align:right;">
6.097
</td>
</tr>
<tr>
<td style="text-align:left;">
ca
</td>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
2020-06-03
</td>
<td style="text-align:right;">
5.884
</td>
<td style="text-align:right;">
6.026
</td>
</tr>
<tr>
<td style="text-align:left;">
ca
</td>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
2020-06-04
</td>
<td style="text-align:right;">
7.970
</td>
<td style="text-align:right;">
6.512
</td>
</tr>
<tr>
<td style="text-align:left;">
ca
</td>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
2020-06-05
</td>
<td style="text-align:right;">
8.397
</td>
<td style="text-align:right;">
6.889
</td>
</tr>
<tr>
<td style="text-align:left;">
ca
</td>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
2020-06-06
</td>
<td style="text-align:right;">
6.712
</td>
<td style="text-align:right;">
6.859
</td>
</tr>
</tbody>
</table>
<p><br /></p>
<p>The formula specified by <code>slide_fun</code> has access to all columns present in the original <a href="https://cmu-delphi.github.io/covidcast/covidcastR/reference/covidcast_signal.html"><code>covidcast_signal</code></a> data frame, and must be referred to with the prefix <code>.x$</code>. Here, the function <a href="https://cmu-delphi.github.io/covidcast/covidcastR/reference/Min.html"><code>modeltools::Mean()</code></a> is a simple wrapper around <code>mean()</code> that omits <code>NA</code> values by default.</p>
<p>Notice that the above <a href="../../../docs/modeltoolsR/reference/slide_by_geo.html"><code>slide_by_geo()</code></a> call returns a data frame with a new column appended that contains the results of the sliding operation specified by <code>slide_fun</code>. By default, this column is named <code>&quot;slide_value&quot;</code>, but alternate names can be passed to <a href="../../../docs/modeltoolsR/reference/slide_by_geo.html"><code>slide_by_geo()</code></a>, as follows:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">slide_by_geo</span>(signals[[<span class="dv">1</span>]], <span class="at">slide_fun =</span> <span class="sc">~</span> <span class="fu">Mean</span>(.x<span class="sc">$</span>value), <span class="at">n =</span> <span class="dv">7</span>, <span class="at">col_name =</span> <span class="st">&quot;7dav&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">table_head</span>(<span class="at">title =</span> <span class="st">&quot;Daily COVID-19 cases per 100,000 pop. (7-day trailing average)&quot;</span>)</span></code></pre></div>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; font-size: 15px;" colspan="6">
<div style>
Daily COVID-19 cases per 100,000 pop. (7-day trailing average)
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
geo_value
</th>
<th style="text-align:left;">
data_source
</th>
<th style="text-align:left;">
signal
</th>
<th style="text-align:left;">
time_value
</th>
<th style="text-align:right;">
value
</th>
<th style="text-align:right;">
7dav
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
ca
</td>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
2020-06-01
</td>
<td style="text-align:right;">
6.337
</td>
<td style="text-align:right;">
6.337
</td>
</tr>
<tr>
<td style="text-align:left;">
ca
</td>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
2020-06-02
</td>
<td style="text-align:right;">
5.856
</td>
<td style="text-align:right;">
6.097
</td>
</tr>
<tr>
<td style="text-align:left;">
ca
</td>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
2020-06-03
</td>
<td style="text-align:right;">
5.884
</td>
<td style="text-align:right;">
6.026
</td>
</tr>
<tr>
<td style="text-align:left;">
ca
</td>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
2020-06-04
</td>
<td style="text-align:right;">
7.970
</td>
<td style="text-align:right;">
6.512
</td>
</tr>
<tr>
<td style="text-align:left;">
ca
</td>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
2020-06-05
</td>
<td style="text-align:right;">
8.397
</td>
<td style="text-align:right;">
6.889
</td>
</tr>
<tr>
<td style="text-align:left;">
ca
</td>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
2020-06-06
</td>
<td style="text-align:right;">
6.712
</td>
<td style="text-align:right;">
6.859
</td>
</tr>
</tbody>
</table>
<p><br /></p>
<p>Since this example is meant to reproduce the 7-day trailing average calculation carried out by the Delphi API, the values in the <code>7dav</code> column should match the pre-computed smoothed daily case rates signal stored in the API (to machine precision). To check this, the code chunk below calculates the maximum absolute difference between the two 7-day trailing averages, over all state-date pairs: <span class="math display">\[\big\{\text{CA, FL, NY, TX}\big\} \times \big\{\text{date}: \text{date}\in \{\text{June 7, 2020, }\dots,\text{ November 15, 2020}\}\big\}.\]</span></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">slide_by_geo</span>(signals[[<span class="dv">1</span>]], <span class="at">slide_fun =</span> <span class="sc">~</span> <span class="fu">Mean</span>(.x<span class="sc">$</span>value), <span class="at">n =</span> <span class="dv">7</span>, <span class="at">col_name =</span> <span class="st">&quot;7dav&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(signals[[<span class="dv">2</span>]], <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;geo_value&quot;</span>, <span class="st">&quot;time_value&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">difference =</span> <span class="st">`</span><span class="at">7dav</span><span class="st">`</span> <span class="sc">-</span> value.y) <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(time_value <span class="sc">&gt;=</span> <span class="st">&quot;2020-06-07&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">max</span>(<span class="fu">abs</span>(difference))) <span class="sc">%&gt;%</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  as.numeric</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 6.757779e-08</span></span></code></pre></div>
<p>The trivial output of this calculation confirms that <a href="../../../docs/modeltoolsR/reference/slide_by_geo.html"><code>slide_by_geo()</code></a> is functioning as desired. <br /><br /></p>
<p><strong>Note:</strong> The raw daily case rates that we pass to <a href="../../../docs/modeltoolsR/reference/slide_by_geo.html"><code>slide_by_geo()</code></a> begin on June 1, 2020, so the <code>&quot;7dav&quot;</code> column created by <a href="../../../docs/modeltoolsR/reference/slide_by_geo.html"><code>slide_by_geo()</code></a> doesn’t represent a true <em>7-day average</em> until June 7, 2020. This is why we only perform the sanity check calculation above on the dates June 7, 2020, …, November 15, 2020. When a trailing window of <code>n</code> days is not available, <a href="../../../docs/modeltoolsR/reference/slide_by_geo.html"><code>slide_by_geo()</code></a> just applies the <code>slide_fun</code> function/formula to whatever data <em>is</em> available. So for June <code>n</code>th, <code>n = 1,...,6</code>, the values in the <code>&quot;7dav&quot;</code> column are only <code>n</code>-day trailing averages. Whereas the pre-computed smoothed daily case rates signal stored in Delphi’s API is a true 7-day average for all dates June 1, 2020, …, November 15, 2020.</p>
</div>
</div>
<div id="sliding-with-a-function" class="section level3">
<h3>Sliding with a function</h3>
<p>We can also pass a function to the <code>slide_fun</code> argument in <a href="../../../docs/modeltoolsR/reference/slide_by_geo.html"><code>slide_by_geo()</code></a>. In this case, the passed function must have the following input argument structure:</p>
<ol style="list-style-type: decimal">
<li><p><code>x</code> : a data frame with the same column names as the data frame passed to <a href="../../../docs/modeltoolsR/reference/slide_by_geo.html"><code>slide_by_geo()</code></a></p></li>
<li><p>Any number of additional <strong>named</strong> arguments</p></li>
<li><p>An ellipsis <code>...</code> to allow for any number of additional general arguments</p></li>
</ol>
<div id="example-2-computing-a-7-day-trailing-average-by-sliding-a-function" class="section level4">
<h4>Example 2: Computing a 7-day trailing average by sliding a function</h4>
<p>The code chunk below reproduces the 7-day trailing average from <a href="#example-1-computing-a-7-day-trailing-average-by-sliding-a-formula"><strong>Example 1</strong></a>, but passes a function to the <code>slide_fun</code> argument instead of a formula.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">slide_by_geo</span>(signals[[<span class="dv">1</span>]], <span class="at">slide_fun =</span> <span class="cf">function</span>(x, ...) <span class="fu">Mean</span>(x<span class="sc">$</span>value), <span class="at">n =</span> <span class="dv">7</span>, <span class="at">col_name =</span> <span class="st">&quot;7dav&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">table_head</span>(<span class="at">title =</span> <span class="st">&quot;Daily COVID-19 cases per 100,000 pop. (7-day trailing average)&quot;</span>)</span></code></pre></div>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; font-size: 15px;" colspan="6">
<div style>
Daily COVID-19 cases per 100,000 pop. (7-day trailing average)
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
geo_value
</th>
<th style="text-align:left;">
data_source
</th>
<th style="text-align:left;">
signal
</th>
<th style="text-align:left;">
time_value
</th>
<th style="text-align:right;">
value
</th>
<th style="text-align:right;">
7dav
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
ca
</td>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
2020-06-01
</td>
<td style="text-align:right;">
6.337
</td>
<td style="text-align:right;">
6.337
</td>
</tr>
<tr>
<td style="text-align:left;">
ca
</td>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
2020-06-02
</td>
<td style="text-align:right;">
5.856
</td>
<td style="text-align:right;">
6.097
</td>
</tr>
<tr>
<td style="text-align:left;">
ca
</td>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
2020-06-03
</td>
<td style="text-align:right;">
5.884
</td>
<td style="text-align:right;">
6.026
</td>
</tr>
<tr>
<td style="text-align:left;">
ca
</td>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
2020-06-04
</td>
<td style="text-align:right;">
7.970
</td>
<td style="text-align:right;">
6.512
</td>
</tr>
<tr>
<td style="text-align:left;">
ca
</td>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
2020-06-05
</td>
<td style="text-align:right;">
8.397
</td>
<td style="text-align:right;">
6.889
</td>
</tr>
<tr>
<td style="text-align:left;">
ca
</td>
<td style="text-align:left;">
usa-facts
</td>
<td style="text-align:left;">
confirmed_incidence_prop
</td>
<td style="text-align:left;">
2020-06-06
</td>
<td style="text-align:right;">
6.712
</td>
<td style="text-align:right;">
6.859
</td>
</tr>
</tbody>
</table>
<p><br /></p>
</div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
